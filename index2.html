<!DOCTYPE html>
<html lang="ja" >
  <head>
    <meta charset="utf-8">
    <title>kikko cont</title>
  </head>
  <body>
    <label for="line1">table1:</label>
    <input type="text" id="line1">
    <br>
    <label for="line2">item1:</label>
    <input type="text" id="line2">
    <br>
    <label for="line3">item2:</label>
    <input type="text" id="line3">
    <br>
    <label for="line4">vote:</label>
    <input type="text" id="line4">
    <br>
    <label for="line5">choice:</label>
    <input type="text" id="line5">
    <br>
    <label for="line6">checkout:</label>
    <input type="text" id="line6">
    <br>
    <br>
    <label for="line11">table1:</label>
    <input type="text" id="line11">
    <br>
    <label for="line12">item1:</label>
    <input type="text" id="line12">
    <br>
    <label for="line13">item2:</label>
    <input type="text" id="line13">
    <br>
    <label for="line14">vote:</label>
    <input type="text" id="line14">
    <br>
    <label for="line15">choice:</label>
    <input type="text" id="line15">
    <br>
    <label for="line16">checkout:</label>
    <input type="text" id="line16">
    <br>
    <br>
    <a href="/index_top.html">index_top</a>
    <button id="sttbtn">start</button>
    <button id="stpbtn">stop</button>
    <br>
    <br>
    <p id="status"></p>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script>
    document.getElementById("sttbtn").onclick=function()
    {
    var json = {};
    json.flg = "1";
    var request = new XMLHttpRequest();
    var jsonText = JSON.stringify(json); // ここで、dataをJSON文字列に変換
    request.open("POST", "https://teppeishimakawa-kikkoglitch.glitch.me");
    request.setRequestHeader('Content-Type', 'application/json');
    request.send(jsonText);

    }
    document.getElementById("stpbtn").onclick=function()
    {
    var json = {};
    json.flg = "0";
    var request = new XMLHttpRequest();
    var jsonText = JSON.stringify(json); // ここで、dataをJSON文字列に変換
    request.open("POST", "https://teppeishimakawa-kikkoglitch.glitch.me");
    request.setRequestHeader('Content-Type', 'application/json');
    request.send(jsonText);

    }
      
var flgg1=0;

var socket = io.connect();
setInterval(function()
{
socket.emit("client_to_server", "poling");
socket.on("server_to_client", function(data)
  {
    console.log("rxdata:" + data)
    document.getElementById("status").innerHTML="rxdata:" + data;
  //data:トリガ信号,flgg:再生ステータス1がstp
    if(data == "1" && flgg1 ==0)
    {
    //document.getElementById("ifm1").src="./index3.html"
    flgg1=1;
    socket.disconnect();
    //socket.close();
    }
  });
},10000);

    </script>
    <script></script>
  </body>
</html>
